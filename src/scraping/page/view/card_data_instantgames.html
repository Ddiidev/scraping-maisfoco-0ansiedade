<article>
	<section>
		<form hx-post="/home/save/@save_is" hx-ext="json-enc-typed" hx-vals="@json_data" hx-target="#result-modal">

			<div class="flex justify-start align-center margin-bot">
				<img nbtl class="margin-lr" style="height: 76px;" src="@banner_img" />
				<h2 class="margin-lr">@data.title</h2>
			</div>
			<grid class="margin-bot">
				<div>
					<img nbtl class="margin-bot margin-lr" src="@banner_img" />
					<div class="margin-lr">
						<p>Tags:</p>
						<gridflex>
							@for tag in badges_html
							@tag
							@endfor
						</gridflex>
					</div>
				</div>

				<div style="min-height: 600px;">
					<p>%studio: <b>@data.studio</b></p>
					<p>%publisher: <b>@data.publisher</b></p>
					<p>%activation_platform: <b>@data.activating_plataform</b></p>
					<p>%genres: <b>@data.genders</b></p>
					<div class="margin-bot padding-bot" style="flex-grow: 1;">
						<p>%about:</p>
						<textarea no-outline readonly class="font-bold"
							style="width: 100%; height: 80%; resize: none;">@data.about</textarea>
					</div>
					<div class="margin-lr">
						<p>%video_preview:</p>
						<input type="text" id="input_preview_video" name="preview_video" oninput="updateVideoPreview()"
							force-update class="font-bold" placeholder="Insira a URL do vídeo" style="width: 100%;" />
						<a href="https://www.youtube.com/results?search_query=@name_search" target="_blank" class="font-bold">Buscar vídeo (@name_search)</a>
						<iframe id="preview_video" nbtl-border width="100%" height="315" frameborder="0"
							allowfullscreen></iframe>
					</div>
					<div class="margin-top padding-top">
						<p>%rating: <b>@data.review_general</b></p>
						<p>%num_rating: <b>@data.qtde_review</b></p>
					</div>
				</div>
			</grid>

			<grid class="margin-bt margin-lr">
				<article>
					<h4 class="margin-lr">%price: <b>$ @price (-${discount}% $ <s>@old_price</s>) </b></h4>
				</article>
			</grid>

			<input style="display: none;" type="number" name="current_date" id="input_current_date" force-update />
			<div class="margin-lr">
				<button type="submit" class="container-full padding-bt margin-right">%bt_save</button>
			</div>
		</form>
	</section>
	<div id="result-modal"></div>

</article>

<script>
	"use strict";
	function updateVideoPreview() {
		const src = convertToEmbed(document.getElementById("input_preview_video").value);
		document.getElementById("preview_video").src = src;
	}
</script>